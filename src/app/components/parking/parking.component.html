<div class="mx-auto p-8 rounded-lg shadow-lg w-full gradient-background">
  <app-button type="segundo" href="/" text="Regresar" class="animate-fadeInUp"></app-button>
  <h2 class="text-5xl font-bold text-center text-black mb-4">
    Plazas de Estacionamiento Disponibles
  </h2>
  <div class="h-1 w-32 bg-white mx-auto mb-6 rounded"></div>

  <!-- Selector para el tipo de vehículo -->
  <div class="flex flex-col items-center mb-6 bg-white p-6 rounded-lg shadow-lg w-full max-w-[300px] mx-auto">
    <label for="vehicleType" class="text-lg font-medium mb-4 text-gray-700">
      Seleccionar tipo de vehículo:
    </label>
    <select
      id="vehicleType"
      [(ngModel)]="tipo"
      (change)="vehiculo()"
      class="border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:border-transparent transition duration-300 w-full max-w-xs bg-gray-50"
    >
      <option value="">-- Selecciona un vehículo --</option>
      <option value="auto">Carro</option>
      <option value="moto">Moto</option>
    </select>
  </div>

  <!-- Mostrar instrucciones y plazas solo si el vehículo ha sido seleccionado -->
  <div *ngIf="tipo">
    <div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl mb-10">
      <div class="md:flex">
        <div class="md:shrink-0">
          <img class="h-48 w-full object-cover md:h-full md:w-48" src="/Recursos/parking.jpg" alt="Modern building architecture">
        </div>
        <div class="p-8">
          <div class="uppercase tracking-wide text-sm text-indigo-500 font-semibold">Instrucciones</div>
          <p class="mt-2 text-slate-500">Selecciona el tipo de vehículo para ver las plazas de estacionamiento
            disponibles. Puedes optar por "Reservar" para ocupar un espacio o
            "Liberar" si ya no lo necesitas.</p>
          <p class="text-gray-700 italic text-center">
            <span class="font-medium text-gray-800">Nota:</span> Asegúrate de liberar
            el espacio cuando ya no lo necesites.
          </p>
        </div>
      </div>
    </div>

    <!-- Mostrar plazas -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      <div
        *ngFor="let space of getFilteredSpaces()"
        [ngClass]="{
          'bg-red-500': space.reservado,
          'bg-[#48ff10]': !space.reservado
        }"
        class="flex flex-col bg-black rounded-3xl relative p-6 shadow-lg overflow-hidden border-2 border-gray-200"
      >
        <div class="px-4 py-6">
          <div class="grid items-center justify-center w-full text-left">
            <h3 class="text-xl font-bold text-white mb-2 text-center">
              Plaza #{{ space.id }}
            </h3>
            <p class="text-white text-base text-center mb-2" *ngIf="!space.reservado">
              Tipo: {{ space.type === "auto" ? "🚗 Carro" : "🏍️ Moto" }}
            </p>
            <p class="text-white text-base text-center mb-4" *ngIf="!space.reservado">
              Estado: {{ space.reservado ? "Reservada" : "Disponible" }}
            </p>

            <!-- Campos adicionales para la reserva -->
            <div *ngIf="!space.reservado">
              <input
                type="text"
                [(ngModel)]="space.plate"
                placeholder="Número de placa"
                class="border border-gray-300 rounded-lg p-2 w-full mb-2"
                required
              />
              <input
                type="number"
                [(ngModel)]="space.duration"
                placeholder="Tiempo (en horas)"
                class="border border-gray-300 rounded-lg p-2 w-full mb-4"
                required
              />
            </div>
            <div class="flex justify-center mt-4 space-x-4">
              <!-- Botón de Reservar -->
              <button
                *ngIf="!space.reservado && space.plate && space.duration"
                (click)="reserveSpace(space.id)"
                class="bg-blue-600 text-white px-4 py-2 rounded-full hover:bg-blue-700 transition duration-200"
              >
                Reservar
              </button>

              <!-- Botón de Liberar -->
              <button
                *ngIf="space.reservado"
                (click)="releaseSpace(space.id)"
                class="bg-[#fbff10] text-black px-4 py-2 rounded-full hover:bg-yellow-500 transition duration-200 z-10 mt-20"
              >
                Liberar
              </button>
            </div>
          </div>
        </div>

        <!-- Indicador visual que el espacio está reservado -->
        <div
          *ngIf="space.reservado"
          class="absolute inset-0 flex items-center justify-center rounded-3xl bg-opacity-70 bg-red-800"
        >
          <span class="text-white font-semibold text-lg">Reservada</span>
        </div>

        <!-- Agregando icono de vehículo -->
        <div class="absolute bottom-4 right-4 text-white text-5xl">
          <span *ngIf="space.type === 'auto'">🚗</span>
          <span *ngIf="space.type === 'moto'">🏍️</span>
        </div>
      </div>
    </div>
  </div>
</div>

